<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>自助导航站 - AI工具、开发资源、热门网站推荐</title>
  <meta name="description" content="精选AI工具、自媒体导航、自媒体、工具、开发资源、设计素材、办公效率工具，一站式导航平台，助你快速找到所需网站。">
  <meta name="keywords" content="导航站,AI工具,自媒体导航,自媒体,工具,开发资源,网站推荐,自助导航,效率工具,设计素材,热榜聚合">
  <meta name="robots" content="index, follow">
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/bootstrap4.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8006116a61e3e6c85c92e8d316fc13b9";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


</head>
<body>
  <header class="bg-dark text-white text-center py-3">
    <h1>我的自助导航站</h1>
      <div class="container mt-3">
      <input type="text" id="search-box" class="form-control" placeholder="搜索网站名称或描述...">
    </div>
  </header>

   <div id="content-wrapper" class="flex-grow-1 d-flex flex-column">
  <!-- 多引擎搜索 -->
  <div class="container mt-4" id="multi-search">
  <div class="input-group mb-2">
    <input type="text" id="multi-search-box" class="form-control" placeholder="输入关键词进行多引擎搜索">
    <div class="input-group-append">
      <button class="btn btn-info" id="multi-search-btn">搜索</button>
    </div>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="checkbox" value="google" id="engine-google" checked>
    <label class="form-check-label" for="engine-google">Google</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="checkbox" value="baidu" id="engine-baidu" checked>
    <label class="form-check-label" for="engine-baidu">百度</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="checkbox" value="bing" id="engine-bing" checked>
    <label class="form-check-label" for="engine-bing">Bing</label>
  </div>
</div>

<div class="container mt-4 d-none" id="multi-search-result">
  <ul class="nav nav-tabs" id="search-tab-nav"></ul>
  <div class="tab-content" id="search-tab-content"></div>
</div>


  <!-- 内容 -->
   <div class="d-flex">
    <!-- 左侧导航栏 -->
    <nav class="sidebar bg-dark text-white p-3">
      <h4>导航分类</h4>
      <ul id="nav-menu" class="list-unstyled"></ul>
    </nav>

    <!-- 右侧内容区 -->
    <main class="flex-fill p-4">
      <div id="main-title" class="mb-4 text-white h3"></div>
      <ul class="nav nav-tabs mb-3 d-none" id="sub-tab-nav"></ul>
      <div class="tab-content" id="sub-tab-content"></div>
    </main>

  </div>

  <!-- 广告位 -->
  <div class="container mt-4">
    <div class="ad-slot text-center">
      <iframe src="ads/banner.html" width="100%" height="90" frameborder="0"></iframe>
    </div>
  </div>

  </div>

  <footer class="text-center py-3">
    <small>© 2025 kllay自助导航平台</small>
  </footer>
  <button id="back-to-top" title="返回顶部">↑</button>


  <script src="assets/js/jquery3.min.js"></script>
  <script src="assets/js/bootstrap4.bundle.min.js"></script>
  <script src="assets/js/main.js"></script>

   <script>
   let siteData = [];

function encodeURL(url) {
  return btoa(url);
}

function renderSidebar(data) {
  let html = '';
  data.forEach((group, i) => {
    html += `<li>
  <strong class="toggle-group d-flex justify-content-between align-items-center" data-index="${i}">
    <span><i class="fas ${group.icon || 'fa-folder'} mr-2"></i>${group.category}</span>
    <i class="fas fa-chevron-right toggle-icon"></i>
  </strong>
  <ul class="sub-menu d-none" id="group-${i}">`;


    group.children.forEach((sub, j) => {
      const isVertical = group.layout === 'vertical';
      const subId = `sub-${group.category}-${j}`.replace(/\s+/g, '-').toLowerCase();
      const anchorId = isVertical ? `#${subId}` : '#';
      html += `<li>
        <a href="${anchorId}" class="nav-link-sub" data-group="${i}" data-sub="${j}" data-tab="${subId}">
          ${sub.category2}
        </a>
      </li>`;
    });

    html += `</ul></li>`;
  });
  $('#nav-menu').html(html);

  // 一级分类点击展开
$('.toggle-group').on('click', function () {
  const index = $(this).data('index');
  const $submenu = $(`#group-${index}`);
  const isActive = $(this).hasClass('active');

  if (isActive) {
    // 当前项已展开 → 收起
    $submenu.addClass('d-none');
    $(this).removeClass('active');
    $(this).find('.toggle-icon').removeClass('fa-chevron-down').addClass('fa-chevron-right');
  } else {
    // 当前项未展开 → 展开并关闭其他项
    $('.sub-menu').addClass('d-none');
    $('.toggle-group').removeClass('active');
    $('.toggle-icon').removeClass('fa-chevron-down').addClass('fa-chevron-right');

    $submenu.removeClass('d-none');
    $(this).addClass('active');
    $(this).find('.toggle-icon').removeClass('fa-chevron-right').addClass('fa-chevron-down');

    // 渲染右侧内容
    renderMainTitle(siteData[index].category);
    renderSubLayout(siteData[index]);
  }
});



  // 二级分类点击跳转
  $('.nav-link-sub').on('click', function (e) {

    const groupIndex = $(this).data('group');
    const subIndex = $(this).data('sub');
    const layout = siteData[groupIndex].layout;

    //  清除所有左侧二级菜单高亮
  $('.nav-link-sub').removeClass('active');

  //  高亮当前点击的左侧项
  $(this).addClass('active');

    if (layout === 'tab') {
      e.preventDefault();
      // 清除所有 tab-link 和 tab-pane 的激活状态
      $('#sub-tab-nav .nav-link').removeClass('active');
      $('#sub-tab-content .tab-pane').removeClass('active show');
      // $('#sub-tab-nav a').eq(subIndex).tab('show');
       const tabId = `sub-${siteData[groupIndex].category}-${subIndex}`.replace(/\s+/g, '-').toLowerCase();
       $('#sub-tab-nav a[href="#' + tabId + '"]').tab('show'); 
       const $tabLink = $('#sub-tab-nav a[href="#' + tabId + '"]');
        if ($tabLink.length) {
            $tabLink.tab('show');
             $tabLink.addClass('active');
           $('#' + tabId).addClass('active show');
          } else {
            // 手动切换 tab-pane（兜底）
            $('.tab-pane').removeClass('active show');
            $('#' + tabId).addClass('active show');
          }
    } else {
      const targetId = `sub-${groupIndex}-${subIndex}`;
      const $target = $(`#${targetId}`);
      if ($target.length) {
        $('html, body').animate({
          scrollTop: $target.offset().top - 60
        }, 500);
      } else {
        console.warn('未找到目标元素:', targetId);
      }

    }
  });
}

function renderMainTitle(title) {
  $('#main-title').text(title);
}

function renderSubLayout(group) {
  const layout = group.layout || 'vertical';
  $('#sub-tab-nav').toggleClass('d-none', layout !== 'tab');
  $('#sub-tab-nav').html('');
  $('#sub-tab-content').html('');

  group.children.forEach((sub, j) => {
    const subId = `sub-${group.category}-${j}`.replace(/\s+/g, '-').toLowerCase();

    if (layout === 'tab') {
      $('#sub-tab-nav').append(`
        <li class="nav-item">
          <a class="nav-link ${j === 0 ? 'active' : ''}" data-toggle="tab" href="#${subId}">${sub.category2}</a>
        </li>
      `);
      $('#sub-tab-content').append(`
        <div class="tab-pane fade ${j === 0 ? 'show active' : ''}" id="${subId}">
          <div class="row">
            ${renderCards(sub.items)}
          </div>
        </div>
      `);

    } else {
      $('#sub-tab-content').append(`
        <section id="${subId}" class="mb-5">
          <h5 class="text-white mb-3">${sub.category2}</h5>
          <div class="row">${renderCards(sub.items)}</div>
        </section>
      `);
    }
  });
}

$('#sub-tab-nav').on('click', '.nav-link', function (e) {
  const tabId = $(this).attr('href').substring(1); // e.g. sub-开发工具-1

  //  清除所有 tab-pane 激活状态
  $('#sub-tab-content .tab-pane').removeClass('active show');
  $('#' + tabId).addClass('active show');

  //  清除所有 tab-link 激活状态
  $('#sub-tab-nav .nav-link').removeClass('active');
  $(this).addClass('active');

  //  同步左侧高亮
  $('.nav-link-sub').removeClass('active');
  $(`.nav-link-sub[data-tab="${tabId}"]`).addClass('active');
});


function renderCards(items) {
  return items.map(item => {
    const encoded = encodeURL(item.url);
    const iconUrl = item.icon && item.icon.trim() !== '' ? item.icon : 'assets/img/default.png';
    return `
      <div class="col-md-3 col-sm-4 col-6 mb-4">
        <a href="jump.html?target=${encoded}&title=${encodeURIComponent(item.title)}"  target="_blank" class="card site-card text-white text-decoration-none h-100">
          <div class="card-body d-flex align-items-center">
            <img src="${iconUrl}" alt="${item.title}" class="rounded-circle mr-2" style="width:64px; height:64px;" onerror="this.src='assets/img/default.png'">
            <div>
              <h6 class="mb-1">${item.title}</h6>
              <small class="desc-limit" title="${item.desc}">${item.desc}</small>
            </div>
          </div>
        </a>
      </div>
    `;
  }).join('');
}

$(function () {
  $.getJSON('data/sites.json', function (data) {
    siteData = data;
    renderSidebar(data);

    // 默认展开第一个分类
    if (siteData.length > 0) {
      $('.toggle-group').first().click();
    }

      console.log('siteData:', siteData);
    console.log('Sidebar rendered');

  });




});


  </script>


</body>
</html>
