<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>自助导航站 - AI工具、开发资源、自媒体、热门网站推荐</title>
  <meta name="description" content="精选AI工具、副业、赚钱、外贸、视频剪辑、自媒体导航、自媒体、工具、开发资源、设计素材、办公效率工具，一站式导航平台，助你快速找到所需网站。">
  <meta name="keywords" content="导航站,AI工具,副业,赚钱,外贸,视频剪辑,自媒体导航,自媒体,工具,开发资源,网站推荐,自助导航,效率工具,设计素材,热榜聚合">
  <meta name="robots" content="index, follow">
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/bootstrap4.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8006116a61e3e6c85c92e8d316fc13b9";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PG8BPWXC');</script>
<!-- End Google Tag Manager -->

</head>
<body>
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PG8BPWXC"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  <header class="bg-dark text-white text-center py-3">
    <h1>我的自助导航站</h1>
      <div class="container mt-3">
      <input type="text" id="search-box" class="form-control" placeholder="搜索网站名称或描述...">
    </div>
    <button class="btn btn-outline-light d-md-none" id="mobile-menu-toggle" style="position:absolute; top:10px; right:10px;">
    <i class="fas fa-bars"></i>
</button>

  </header>

   <div id="content-wrapper" class="flex-grow-1 d-flex flex-column">
  <!-- 多引擎搜索 -->
  <div class="container mt-4" id="multi-search">
  <div class="input-group mb-2">
    <input type="text" id="multi-search-box" class="form-control" placeholder="输入关键词进行多引擎搜索">
    <div class="input-group-append">
      <button class="btn btn-info" id="multi-search-btn">搜索</button>
    </div>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="checkbox" value="google" id="engine-google" checked>
    <label class="form-check-label" for="engine-google">Google</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="checkbox" value="baidu" id="engine-baidu" checked>
    <label class="form-check-label" for="engine-baidu">百度</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="checkbox" value="bing" id="engine-bing" checked>
    <label class="form-check-label" for="engine-bing">Bing</label>
  </div>
</div>

<div class="container mt-4 d-none" id="multi-search-result">
  <ul class="nav nav-tabs" id="search-tab-nav"></ul>
  <div class="tab-content" id="search-tab-content"></div>
</div>


  <!-- 内容 -->
   <div class="d-flex">
    <!-- 左侧导航栏 -->
    <nav class="sidebar bg-dark text-white p-3">
      <h4>导航分类</h4>
      <ul id="nav-menu" class="list-unstyled">
        <!-- 动态生成的导航菜单 -->
      </ul>
      <ul class="list-unstyled">
          <li>
            <strong class="toggle-group" data-index="user">
              <span><i class="fas fa-user mr-2"></i>我的专属导航</span>
              <i class="fas fa-chevron-right toggle-icon"></i>
            </strong>
            <ul class="sub-menu d-none" id="group-user">
              <li><a href="#" class="nav-link-sub" id="create-custom">创建自定义导航</a></li>
              <li><button id="export-my-nav" class="btn btn-outline-light mt-3">导出我的导航</button>
              </li>
              <li>
                <label for="import-my-nav" class="btn btn-outline-light mt-3">
                  导入导航 JSON 文件
                </label>
                <input type="file" id="import-my-nav" accept=".json" class="d-none">

              </li>
            </ul>
          </li>

        


      </ul>

    </nav>

    <!-- 右侧内容区 -->
    <main class="flex-fill p-4">
      <div id="main-title" class="mb-4 text-white h3"></div>
      <ul class="nav nav-tabs mb-3 d-none" id="sub-tab-nav"></ul>
      <div class="tab-content" id="sub-tab-content"></div>
    </main>

  </div>

  <!-- 广告位 -->
  <div class="container mt-4">
    <div class="ad-slot text-center">
      <iframe src="ads/banner.html" width="100%" height="90" frameborder="0"></iframe>
    </div>
  </div>

  </div>

<!-- 弹窗 -->
   <div id="custom-nav-modal" class="modal" tabindex="-1" role="dialog" style="display:none;">
            <div class="modal-dialog" role="document">
              <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                  <h5 class="modal-title">添加自定义导航</h5>
                  <button type="button" class="close text-white" id="close-custom-modal">&times;</button>
                </div>
                <div class="modal-body">
                  <input type="text" id="custom-category" class="form-control mb-2" placeholder="一级类目名称">
                  <input type="text" id="custom-subcategory" class="form-control mb-2" placeholder="二级类目名称">
                  <input type="text" id="custom-title" class="form-control mb-2" placeholder="网站标题">
                  <input type="text" id="custom-url" class="form-control mb-2" placeholder="网站链接">
                  <input type="text" id="custom-desc" class="form-control mb-2" placeholder="网站描述">
                  <input type="text" id="custom-icon" class="form-control mb-2" placeholder="图标地址">
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-success" id="save-custom-nav">保存</button>
                  <button type="button" class="btn btn-secondary" id="close-custom-modal-2">关闭</button>
                </div>
              </div>
            </div>
          </div>

  <footer class="text-center py-3">
    <small>© 2025 kllay自助导航平台</small>
  </footer>
  <div id="mobile-menu" class="bg-dark text-white p-3" style="position:fixed;top:0;right:0;width:80%;height:100%;z-index:9999;display:none;overflow-y:auto;">
  <button class="btn btn-sm btn-light mb-3" id="mobile-menu-close">关闭菜单</button>
  <ul id="mobile-nav-menu" class="list-unstyled"></ul>
  </div>

  <button id="back-to-top" title="返回顶部">↑</button>
  <canvas id="mouse-trail-canvas" style="position:fixed;top:0;left:0;pointer-events:none;z-index:9999;"></canvas>


  <script src="assets/js/jquery3.min.js"></script>
  <script src="assets/js/bootstrap4.bundle.min.js"></script>
  <script src="assets/js/main.js"></script>
  <script src="assets/js/mouse.js"></script>
  <script src="assets/js/audios.js"></script>

   <script>
   let siteData = [];

function encodeURL(url) {
  return btoa(url);
}

function renderSidebar(data) {
  let html = '';
  data.forEach((group, i) => {
    html += `<li>
  <strong class="toggle-group d-flex justify-content-between align-items-center" data-index="${i}">
    <span><i class="fas ${group.icon || 'fa-folder'} mr-2"></i>${group.category}</span>
    <i class="fas fa-chevron-right toggle-icon"></i>
  </strong>
  <ul class="sub-menu d-none" id="group-${i}">`;


    group.children.forEach((sub, j) => {
      const isVertical = group.layout === 'vertical';
      const subId = `sub-${group.category}-${j}`.replace(/\s+/g, '-').toLowerCase();
      const anchorId = isVertical ? `#${subId}` : '#';
      html += `<li>
        <a href="${anchorId}" class="nav-link-sub" data-group="${i}" data-sub="${j}" data-tab="${subId}">
          ${sub.category2}
        </a>
      </li>`;
    });

    html += `</ul></li>`;
  });
  $('#nav-menu').html(html);

  // 一级分类点击展开
$('.toggle-group').on('click', function () {
  const index = $(this).data('index');
  const $submenu = $(`#group-${index}`);
  const isActive = $(this).hasClass('active');

  if (isActive) {
    // 当前项已展开 → 收起
    $submenu.addClass('d-none');
    $(this).removeClass('active');
    $(this).find('.toggle-icon').removeClass('fa-chevron-down').addClass('fa-chevron-right');
  } else {
    // 当前项未展开 → 展开并关闭其他项
    $('.sub-menu').addClass('d-none');
    $('.toggle-group').removeClass('active');
    $('.toggle-icon').removeClass('fa-chevron-down').addClass('fa-chevron-right');

    $submenu.removeClass('d-none');
    $(this).addClass('active');
    $(this).find('.toggle-icon').removeClass('fa-chevron-right').addClass('fa-chevron-down');

    // 渲染右侧内容
    renderMainTitle(siteData[index].category);
    renderSubLayout(siteData[index]);
  }
});



  // 二级分类点击跳转
  $('.nav-link-sub').on('click', function (e) {

    const groupIndex = $(this).data('group');
    const subIndex = $(this).data('sub');
    const layout = siteData[groupIndex].layout;

    //  清除所有左侧二级菜单高亮
  $('.nav-link-sub').removeClass('active');

  //  高亮当前点击的左侧项
  $(this).addClass('active');

    if (layout === 'tab') {
      e.preventDefault();
      // 清除所有 tab-link 和 tab-pane 的激活状态
      $('#sub-tab-nav .nav-link').removeClass('active');
      $('#sub-tab-content .tab-pane').removeClass('active show');
      // $('#sub-tab-nav a').eq(subIndex).tab('show');
       const tabId = `sub-${siteData[groupIndex].category}-${subIndex}`.replace(/\s+/g, '-').toLowerCase();
       $('#sub-tab-nav a[href="#' + tabId + '"]').tab('show'); 
       const $tabLink = $('#sub-tab-nav a[href="#' + tabId + '"]');
        if ($tabLink.length) {
            $tabLink.tab('show');
             $tabLink.addClass('active');
           $('#' + tabId).addClass('active show');
          } else {
            // 手动切换 tab-pane（兜底）
            $('.tab-pane').removeClass('active show');
            $('#' + tabId).addClass('active show');
          }
    } else {
      const targetId = `sub-${groupIndex}-${subIndex}`;
      const $target = $(`#${targetId}`);
      if ($target.length) {
        $('html, body').animate({
          scrollTop: $target.offset().top - 60
        }, 500);
      } else {
        console.warn('未找到目标元素:', targetId);
      }

    }
  });
}


function renderMobileMenu(data) {
  let html = '';
  data.forEach((group, i) => {
    html += `<li class="mb-2">
      <strong>${group.category}</strong>
      <ul class="ml-3">`;
    group.children.forEach((sub, j) => {
      html += `<li>
        <a href="#" class="text-white mobile-nav-link" data-group="${i}" data-sub="${j}">
          ${sub.category2}
        </a>
      </li>`;
    });
    html += `</ul></li>`;
  });
  $('#mobile-nav-menu').html(html);

  $('.mobile-nav-link').on('click', function () {
    const groupIndex = $(this).data('group');
    const subIndex = $(this).data('sub');
    $('.toggle-group').eq(groupIndex).click();
    $(`.nav-link-sub[data-group="${groupIndex}"][data-sub="${subIndex}"]`).click();
    $('#mobile-menu').fadeOut();
  });
}


function renderMainTitle(title) {
  $('#main-title').text(title);
}

function renderSubLayout(group) {
  const layout = group.layout || 'vertical';
  $('#sub-tab-nav').toggleClass('d-none', layout !== 'tab');
  $('#sub-tab-nav').html('');
  $('#sub-tab-content').html('');

  group.children.forEach((sub, j) => {
    const subId = `sub-${group.category}-${j}`.replace(/\s+/g, '-').toLowerCase();

    if (layout === 'tab') {
      $('#sub-tab-nav').append(`
        <li class="nav-item">
          <a class="nav-link ${j === 0 ? 'active' : ''}" data-toggle="tab" href="#${subId}">${sub.category2}</a>
        </li>
      `);
      $('#sub-tab-content').append(`
        <div class="tab-pane fade ${j === 0 ? 'show active' : ''}" id="${subId}">
          <div class="row">
            ${renderCards(sub.items)}
          </div>
        </div>
      `);

    } else {
      $('#sub-tab-content').append(`
        <section id="${subId}" class="mb-5">
          <h5 class="text-white mb-3">${sub.category2}</h5>
          <div class="row">${renderCards(sub.items)}</div>
        </section>
      `);
    }
  });
}

$('#sub-tab-nav').on('click', '.nav-link', function (e) {
  const tabId = $(this).attr('href').substring(1); // e.g. sub-开发工具-1

  //  清除所有 tab-pane 激活状态
  $('#sub-tab-content .tab-pane').removeClass('active show');
  $('#' + tabId).addClass('active show');

  //  清除所有 tab-link 激活状态
  $('#sub-tab-nav .nav-link').removeClass('active');
  $(this).addClass('active');

  //  同步左侧高亮
  $('.nav-link-sub').removeClass('active');
  $(`.nav-link-sub[data-tab="${tabId}"]`).addClass('active');
});


function renderCards(items) {
  return items.map(item => {
    const encoded = encodeURL(item.url);
    const iconUrl = item.icon && item.icon.trim() !== '' ? item.icon : 'assets/img/default.png';
    const editBtn = item.isLocal
      ? `<button class="btn btn-sm btn-warning edit-nav-btn mt-2" data-title="${item.title}">编辑</button>`
      : '';
    const deleteBtn = item.isLocal
      ? `<button class="btn btn-sm btn-danger delete-nav-btn mt-2" data-title="${item.title}">删除</button>`
      : '';

    return `
      <div class="col-md-3 col-sm-4 col-6 mb-4">
        <div class="card site-card text-white text-decoration-none h-100 p-2">
          <a href="jump.html?target=${encoded}&title=${encodeURIComponent(item.title)}" target="_blank" class="text-white text-decoration-none">
            <div class="d-flex flex-md-row flex-column align-items-center">
              <img src="${iconUrl}" alt="${item.title}" class="rounded-circle mb-2 mb-md-0 mr-md-2" style="width:64px; height:64px;" onerror="this.src='assets/img/default.png'">
              <div class="text-center text-md-left">
                <h6 class="mb-1">${item.title}</h6>
                <small class="desc-limit d-block" title="${item.desc}">${item.desc}</small>
              </div>
            </div>
          </a>
          ${editBtn}
          ${deleteBtn}
        </div>
      </div>
    `;
  }).join('');
}



const categories = ['main', 'aitools','wemedia','developtool', 'workassistant'];

$(function () {
  let loaded = 0;

  categories.forEach(category => {
    $.getJSON(`data/sites-${category}.json`, function (data) {
      siteData = siteData.concat(data);
      loaded++;

      if (loaded === categories.length) {
        renderSidebar(siteData);
        renderMobileMenu(siteData);
        if (siteData.length > 0) {
          $('.toggle-group').first().click();
        }
        console.log('siteData:', siteData);
      }
    });
  });
});


  </script>


</body>
</html>
